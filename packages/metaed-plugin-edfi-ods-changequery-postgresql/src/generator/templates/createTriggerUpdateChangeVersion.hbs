{{#if useLicenseHeader}}
{{#if triggers}}
-- SPDX-License-Identifier: Apache-2.0
-- Licensed to the Ed-Fi Alliance under one or more agreements.
-- The Ed-Fi Alliance licenses this file to you under the Apache License, Version 2.0.
-- See the LICENSE and NOTICES files in the project root for more information.

{{/if}}
{{/if}}
{{#if isStyle5dot4}}
DO $$
BEGIN
{{/if}}
{{#triggers}}
{{#if isStyle5dot4}}
IF NOT EXISTS(SELECT 1 FROM information_schema.triggers WHERE trigger_name = 'updatechangeversion' AND event_object_schema = '{{schema}}' AND event_object_table = '{{tableName}}') THEN
{{/if}}
CREATE TRIGGER {{triggerName}} BEFORE UPDATE ON {{{schema}}}.{{{tableName}}}
    FOR EACH ROW EXECUTE PROCEDURE changes.UpdateChangeVersion();
{{#if isStyle5dot4}}
END IF;
{{/if}}

{{/triggers}}
{{#if isStyle5dot4}}
END
$$;
{{/if}}